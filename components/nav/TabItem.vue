<script>
import { mapMutations } from 'vuex';

export default {
  props: {
    isActive: {
      type: Boolean,
      default: false
    },
    title: {
      type: String,
      default: null
    },
    icon: {
      type: String,
      default: null
    },
    link: {
      type: String,
      default: null
    }
  },
  methods: {
    ...mapMutations('page', ['setIsMenuVisible'])
  }
};
</script>

<template>
  <nuxt-link
    :to="link"
    class="tab-item"
    @click.native="setIsMenuVisible(false)"
  >
    <svg
      v-if="icon === 'create-portfolio'"
      class="tab-item__icon"
      viewBox="0 0 18 18"
    >
      <path
        d="M10.2656 7.73438L12.9844 9L10.2656 10.2656L9 12.9844L7.73438 10.2656L5.01562 9L7.73438 7.73438L9 5.01562L10.2656 7.73438ZM14.0156 6.98438L13.0781 4.92188L11.0156 3.98438L13.0781 3.04688L14.0156 0.984375L14.9531 3.04688L17.0156 3.98438L14.9531 4.92188L14.0156 6.98438ZM16.0312 6.98438H18V15.9844C18 16.5156 17.7969 16.9844 17.3906 17.3906C17.0156 17.7969 16.5625 18 16.0312 18H2.01562C1.48438 18 1.01562 17.7969 0.609375 17.3906C0.203125 16.9844 0 16.5156 0 15.9844V2.01562C0 1.48438 0.203125 1.01563 0.609375 0.609375C1.01562 0.203125 1.48438 0 2.01562 0H11.0156V2.01562H2.01562V15.9844H16.0312V6.98438Z"
      />
    </svg>
    <svg
      v-if="icon === 'dashboard'"
      class="tab-item__icon tab-item__icon_w20 tab-item__icon_h22"
      viewBox="0 0 20 22"
    >
      <path
        d="M16 8.01562H4V18H16V8.01562ZM18.0156 20.0156V6H13.5156L10.0469 2.48438L6.53125 6H1.98438V20.0156H18.0156ZM18.0156 3.98438C18.5469 3.98438 19 4.1875 19.375 4.59375C19.7812 5 19.9844 5.46875 19.9844 6V20.0156C19.9844 20.5469 19.7812 21.0156 19.375 21.4219C19 21.7969 18.5469 21.9844 18.0156 21.9844H1.98438C1.45312 21.9844 0.984375 21.7969 0.578125 21.4219C0.203125 21.0156 0.015625 20.5469 0.015625 20.0156V6C0.015625 5.46875 0.203125 5 0.578125 4.59375C0.984375 4.1875 1.45312 3.98438 1.98438 3.98438H6.01562L10 0L13.9844 3.98438H18.0156Z"
      />
    </svg>
    <svg
      v-if="icon === 'ready-made'"
      class="tab-item__icon"
      viewBox="0 0 18 18"
    >
      <path
        d="M12.9844 6H17.0156V17.0156H12.9844V6ZM0.984375 17.0156V9H5.01562V17.0156H0.984375ZM6.98438 17.0156V0.984375H11.0156V17.0156H6.98438Z"
      />
    </svg>
    <svg
      v-if="icon === 'backtest'"
      class="tab-item__icon tab-item__icon_w20 tab-item__icon_h12"
      viewBox="0 0 20 12"
    >
      <path
        d="M13.9844 0H19.9844V6L17.6875 3.70312L11.4062 9.98438L7.42188 6L1.42188 12L0.015625 10.5938L7.42188 3.1875L11.4062 7.17188L16.2812 2.29688L13.9844 0Z"
      />
    </svg>
    <svg
      v-if="icon === 'help'"
      class="tab-item__icon tab-item__icon_w20 tab-item__icon_h20"
      viewBox="0 0 20 20"
    >
      <path
        d="M7.1875 5.17188C7.96875 4.39062 8.90625 4 10 4C11.0938 4 12.0312 4.39062 12.8125 5.17188C13.5938 5.95313 13.9844 6.89062 13.9844 7.98438C13.9844 8.82812 13.4844 9.70312 12.4844 10.6094C11.4844 11.4844 10.9844 12.2812 10.9844 13H9.01562C9.01562 12.2812 9.17188 11.6719 9.48438 11.1719C9.79688 10.6406 10.1406 10.2656 10.5156 10.0469C10.8906 9.79688 11.2344 9.5 11.5469 9.15625C11.8594 8.8125 12.0156 8.42188 12.0156 7.98438C12.0156 7.45312 11.8125 7 11.4062 6.625C11 6.21875 10.5312 6.01562 10 6.01562C9.46875 6.01562 9 6.21875 8.59375 6.625C8.1875 7 7.98438 7.45312 7.98438 7.98438H6.01562C6.01562 6.89062 6.40625 5.95313 7.1875 5.17188ZM4.32812 15.6719C5.92188 17.2344 7.8125 18.0156 10 18.0156C12.1875 18.0156 14.0625 17.2344 15.625 15.6719C17.2188 14.0781 18.0156 12.1875 18.0156 10C18.0156 7.8125 17.2188 5.9375 15.625 4.375C14.0625 2.78125 12.1875 1.98438 10 1.98438C7.8125 1.98438 5.92188 2.78125 4.32812 4.375C2.76562 5.9375 1.98438 7.8125 1.98438 10C1.98438 12.1875 2.76562 14.0781 4.32812 15.6719ZM2.92188 2.96875C4.89062 1 7.25 0.015625 10 0.015625C12.75 0.015625 15.0938 1 17.0312 2.96875C19 4.90625 19.9844 7.25 19.9844 10C19.9844 12.75 19 15.1094 17.0312 17.0781C15.0938 19.0156 12.75 19.9844 10 19.9844C7.25 19.9844 4.89062 19.0156 2.92188 17.0781C0.984375 15.1094 0.015625 12.75 0.015625 10C0.015625 7.25 0.984375 4.90625 2.92188 2.96875ZM9.01562 16V13.9844H10.9844V16H9.01562Z"
      />
    </svg>
    <svg
      v-if="icon === 'payment'"
      class="tab-item__icon tab-item__icon_w20"
      viewBox="0 0 20 18"
    >
      <path
        d="M18.0156 5.01562V3H1.98438V5.01562H18.0156ZM18.0156 15V9H1.98438V15H18.0156ZM18.0156 0.984375C18.5781 0.984375 19.0469 1.1875 19.4219 1.59375C19.7969 1.96875 19.9844 2.4375 19.9844 3V15C19.9844 15.5625 19.7969 16.0469 19.4219 16.4531C19.0469 16.8281 18.5781 17.0156 18.0156 17.0156H1.98438C1.42188 17.0156 0.953125 16.8281 0.578125 16.4531C0.203125 16.0469 0.015625 15.5625 0.015625 15V3C0.015625 2.4375 0.203125 1.96875 0.578125 1.59375C0.953125 1.1875 1.42188 0.984375 1.98438 0.984375H18.0156Z"
      />
    </svg>
    <svg
      v-if="icon === 'about'"
      class="tab-item__icon tab-item__icon_w20"
      viewBox="0 0 20 18"
    >
      <path
        d="M7.98438 17.0156H3.01562V9H0.015625L10 0L19.9844 9H16.9844V17.0156H12.0156V11.0156H7.98438V17.0156Z"
      />
    </svg>
    <svg
      v-if="icon === 'rebalance'"
      class="tab-item__icon"
      viewBox="0 0 18 18"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M8.76562 9.23438C7.85938 8.29688 7.40625 7.15625 7.40625 5.8125C7.40625 4.46875 7.85938 3.32812 8.76562 2.39062C9.70312 1.45312 10.8438 0.984375 12.1875 0.984375C13.5312 0.984375 14.6719 1.45312 15.6094 2.39062C16.5469 3.32812 17.0156 4.46875 17.0156 5.8125C17.0156 7.15625 16.5469 8.29688 15.6094 9.23438C14.6719 10.1406 13.5312 10.5938 12.1875 10.5938C10.8438 10.5938 9.70312 10.1406 8.76562 9.23438ZM10.3594 16.4531C9.98438 16.0469 9.79688 15.5625 9.79688 15C9.79688 14.4375 9.98438 13.9688 10.3594 13.5938C10.7656 13.1875 11.25 12.9844 11.8125 12.9844C12.375 12.9844 12.8438 13.1875 13.2188 13.5938C13.5938 13.9688 13.7812 14.4375 13.7812 15C13.7812 15.5625 13.5938 16.0469 13.2188 16.4531C12.8438 16.8281 12.375 17.0156 11.8125 17.0156C11.25 17.0156 10.7656 16.8281 10.3594 16.4531ZM1.92188 13.6406C1.29688 13.0156 0.984375 12.2656 0.984375 11.3906C0.984375 10.5156 1.29688 9.76562 1.92188 9.14062C2.54688 8.51562 3.3125 8.20312 4.21875 8.20312C5.09375 8.20312 5.84375 8.51562 6.46875 9.14062C7.09375 9.73438 7.40625 10.4844 7.40625 11.3906C7.40625 12.2969 7.09375 13.0625 6.46875 13.6875C5.84375 14.2812 5.09375 14.5781 4.21875 14.5781C3.3125 14.5781 2.54688 14.2656 1.92188 13.6406Z"
      />
    </svg>
    <svg
      v-if="icon === 'market'"
      class="tab-item__icon tab-item__icon_w20 tab-item__icon_h30"
      viewBox="0 0 24 30"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M10 19.5187V16.5884L0 6.4H24L14 16.5884V19.5187C16.5551 20.3585 18.4 22.7638 18.4 25.6C18.4 29.1346 15.5346 32 12 32C8.46538 32 5.6 29.1346 5.6 25.6C5.6 22.7638 7.44485 20.3585 10 19.5187ZM16.8 25.6C16.8 28.251 14.651 30.4 12 30.4C9.34903 30.4 7.2 28.251 7.2 25.6C7.2 22.949 9.34903 20.8 12 20.8C14.651 20.8 16.8 22.949 16.8 25.6Z"
      />
      <path
        d="M11.8 4.4C13.0149 4.4 14 3.41484 14 2.2C14 0.985156 13.0149 0 11.8 0C10.5852 0 9.60001 0.985156 9.60001 2.2C9.60001 3.41484 10.5852 4.4 11.8 4.4Z"
      />
      <path
        d="M17.8 3.2C18.9474 3.2 19.89 4.07885 19.991 5.2H15.609C15.7101 4.07885 16.6526 3.2 17.8 3.2Z"
      />
      <path
        d="M5.80001 3.2C6.94744 3.2 7.88996 4.07885 7.99104 5.2H3.60898C3.71006 4.07885 4.65259 3.2 5.80001 3.2Z"
      />
      <path
        d="M15.6 24.4118L14.3745 23.2L11.5703 25.973L9.62552 24.05L8.4 25.2618L10.3414 27.1882L11.5669 28.4L12.799 27.1882L15.6 24.4118Z"
      />
    </svg>
    <svg
      v-if="icon === 'matrix'"
      class="tab-item__icon tab-item__icon_w20 tab-item__icon_h30"
      viewBox="0 0 19 14"
    >
      <path
        d="M15 0.015625H18.9844V4H15V0.015625ZM15 13.9844V10H18.9844V13.9844H15ZM9.98438 13.9844V10H14.0156V13.9844H9.98438ZM5.01562 13.9844V10H9V13.9844H5.01562ZM0 13.9844V10H3.98438V13.9844H0ZM15 9.01562V4.98438H18.9844V9.01562H15ZM9.98438 0.015625H14.0156V4H9.98438V0.015625ZM5.01562 4V0.015625H9V4H5.01562ZM9.98438 9.01562V4.98438H14.0156V9.01562H9.98438ZM5.01562 9.01562V4.98438H9V9.01562H5.01562ZM0 9.01562V4.98438H3.98438V9.01562H0ZM0 4V0.015625H3.98438V4H0Z"
      />
    </svg>
    <svg
      v-if="icon === 'efficient-frontier'"
      class="tab-item__icon tab-item__icon_w20 tab-item__icon_h30"
      width="23"
      height="16"
      viewBox="0 0 23 16"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M16.031 10.554L16.0312 10.5543L16.0316 10.554C16.0314 10.554 16.0312 10.554 16.031 10.554ZM20.0156 6.5699C18.7969 5.35115 17.4219 4.42928 15.8906 3.80428L16.4062 0.991776C18.5625 1.77303 20.4375 2.96053 22.0312 4.55428L20.0156 6.5699ZM0 4.55428C1.84375 2.71053 3.96875 1.42928 6.375 0.710526C8.8125 -0.0394737 11.2656 -0.195724 13.7344 0.241776L12.5625 2.91365C10.6562 2.66365 8.76562 2.86678 6.89062 3.52303C5.04688 4.14803 3.42188 5.16365 2.01562 6.5699L0 4.55428ZM14.9062 0.569901C15.25 0.569901 15.4219 0.726151 15.4219 1.03865L12.9844 13.9293V13.9762C12.8906 14.4137 12.6562 14.7887 12.2812 15.1012C11.9062 15.4137 11.4844 15.5699 11.0156 15.5699C10.4531 15.5699 9.96875 15.3824 9.5625 15.0074C9.1875 14.6012 9 14.1168 9 13.5543C9 13.2105 9.07812 12.8824 9.23438 12.5699L14.4375 0.944901C14.5312 0.694901 14.6875 0.569901 14.9062 0.569901Z"
      />
    </svg>

    <div 
      :title="title" 
      class="tab-item__tip" />
    <div class="tab-item__title">
      {{ title }}
    </div>
  </nuxt-link>
</template>

<style lang="scss">
.tab-item {
  $this: &;

  position: relative;
  @extend %center;
  background: $white;
  width: em($tab-width);
  height: em($tab-width);
  box-sizing: border-box;
  border-bottom: 1px solid $grey;
  cursor: pointer;

  @include ifparent('.account') {
    /*background: rgba(255, 255, 255, 0.2);*/
    border-color: rgba(0, 0, 0, 0.1);
    transition: background $speed;
  }

  &::after {
    content: '';
    display: block;
    position: absolute;
    width: 100%;
    height: em(12px);
    bottom: em(-12px);
    left: 0;
    background: linear-gradient(to bottom, $grey, $white);
    opacity: 0;
    pointer-events: none;
    transition: height 0.2s;
    @include ifparent('.account') {
      display: none;
    }
  }

  &__icon {
    width: em(18px);
    height: em(18px);
    fill: $grey;
    transition: fill $speed;
    z-index: 3;

    @include ifparent('.is_active') {
      fill: $white;
    }

    &_w20 {
      width: em(20px);
    }

    &_h20 {
      height: em(20px);
    }

    &_h22 {
      height: em(22px);
    }
    &_h30 {
      height: em(30px);
    }
    &_h12 {
      height: em(12px);
    }
  }

  &__tip {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 3;
  }

  &__title {
    position: absolute;
    white-space: nowrap;
    color: $white;
    font-weight: bold;
    top: 0;
    left: 0;
    height: em($tab-width);
    line-height: em($tab-width);
    padding-left: em($tab-width + 16);
    z-index: 4;
    visibility: hidden;
    transition: visibility $speed, color $speed;

    @include ifparent('.is_active') {
      visibility: visible;
    }
    @include ifparent('.nuxt-link-active') {
      color: $yellow;
    }
  }

  &:hover {
    #{$this}__icon {
      fill: $black;
      @include ifparent('.is_active') {
        fill: $yellow;
      }
    }
    #{$this}__title {
      color: $yellow;
    }
    @include ifparent('.account') {
      background: $white;
    }
  }

  &.nuxt-link-active {
    border-bottom-color: transparent;
    &::after {
      opacity: 0.6;
      z-index: 1;
    }
    .tab-item__icon {
      fill: $blue;
      @include ifparent('.is_active') {
        fill: $white;
      }
    }
  }
}
</style>
